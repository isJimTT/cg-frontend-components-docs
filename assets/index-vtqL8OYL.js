import{G as _,k as g,a as C,d as B,aB as G,s as U,y as L,o as y,a1 as q,B as w,q as $,u as J,c as K,w as Q,g as X,ab as Y}from"./iframe-CiolPNwv.js";import{i as Z}from"./isVisible-BHYmLg1T.js";import{u as l}from"./useState-Ds4oJkA7.js";import{w as S}from"./raf-Deuc0E8-.js";const ee=e=>{const{componentCls:t,colorPrimary:o}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},te=_("Wave",e=>[ee(e)]);function oe(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function b(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&oe(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ae(e){const{borderTopColor:t,borderColor:o,backgroundColor:r}=getComputedStyle(e);return b(t)?t:b(o)?o:b(r)?r:null}function h(e){return Number.isNaN(e)?0:e}const ne=B({props:{target:G(),className:String},setup(e){const t=U(null),[o,r]=l(null),[d,i]=l([]),[u,m]=l(0),[c,p]=l(0),[a,v]=l(0),[k,O]=l(0),[I,j]=l(!1);function W(){const{target:n}=e,s=getComputedStyle(n);r(ae(n));const R=s.position==="static",{borderLeftWidth:F,borderTopWidth:A}=s;m(R?n.offsetLeft:h(-parseFloat(F))),p(R?n.offsetTop:h(-parseFloat(A))),v(n.offsetWidth),O(n.offsetHeight);const{borderTopLeftRadius:D,borderTopRightRadius:H,borderBottomLeftRadius:M,borderBottomRightRadius:P}=s;i([D,H,P,M].map(V=>h(parseFloat(V))))}let f,T,x;const E=()=>{clearTimeout(x),S.cancel(T),f?.disconnect()},N=()=>{var n;const s=(n=t.value)===null||n===void 0?void 0:n.parentElement;s&&(g(null,s),s.parentElement&&s.parentElement.removeChild(s))};L(()=>{E(),x=setTimeout(()=>{N()},5e3);const{target:n}=e;n&&(T=S(()=>{W(),j(!0)}),typeof ResizeObserver<"u"&&(f=new ResizeObserver(W),f.observe(n)))}),y(()=>{E()});const z=n=>{n.propertyName==="opacity"&&N()};return()=>{if(!I.value)return null;const n={left:`${u.value}px`,top:`${c.value}px`,width:`${a.value}px`,height:`${k.value}px`,borderRadius:d.value.map(s=>`${s}px`).join(" ")};return o&&(n["--wave-color"]=o.value),C(q,{appear:!0,name:"wave-motion",appearFromClass:"wave-motion-appear",appearActiveClass:"wave-motion-appear",appearToClass:"wave-motion-appear wave-motion-appear-active"},{default:()=>[C("div",{ref:t,class:e.className,style:n,onTransitionend:z},null)]})}}});function re(e,t){const o=document.createElement("div");return o.style.position="absolute",o.style.left="0px",o.style.top="0px",e?.insertBefore(o,e?.firstChild),g(C(ne,{target:e,className:t},null),o),()=>{g(null,o),o.parentElement&&o.parentElement.removeChild(o)}}function se(e,t){const o=$();let r;function d(){var i;const u=w(o);r?.(),!(!((i=t?.value)===null||i===void 0)&&i.disabled||!u)&&(r=re(u,e.value))}return y(()=>{r?.()}),d}const ce=B({compatConfig:{MODE:3},name:"Wave",props:{disabled:Boolean},setup(e,t){let{slots:o}=t;const r=$(),{prefixCls:d,wave:i}=J("wave",e),[,u]=te(d),m=se(K(()=>X(d.value,u.value)),i);let c;const p=()=>{w(r).removeEventListener("click",c,!0)};return L(()=>{Q(()=>e.disabled,()=>{p(),Y(()=>{const a=w(r);a?.removeEventListener("click",c,!0),!(!a||a.nodeType!==1||e.disabled)&&(c=v=>{v.target.tagName==="INPUT"||!Z(v.target)||!a.getAttribute||a.getAttribute("disabled")||a.disabled||a.className.includes("disabled")||a.className.includes("-leave")||m()},a.addEventListener("click",c,!0))})},{immediate:!0,flush:"post"})}),y(()=>{p()}),()=>{var a;return(a=o.default)===null||a===void 0?void 0:a.call(o)[0]}}});export{ce as W};
