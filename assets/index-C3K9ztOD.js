import{d as R,aB as A,P as O,aE as X,u as he,i as Pe,g as H,a as u,_ as d,Z as Fe,e as x,O as V,F as we,s as T,y as Be,B as Ne,o as Oe,V as Se,W as Ae,Y as Ie,X as $e,k as Z,aF as Me,aG as Re,aH as Ee,c as U,aI as je,aJ as De,w as ee,v as Le,aK as ze}from"./iframe-CiolPNwv.js";import{u as He,D as Ve}from"./index-CkwMM7Xi.js";import{a as We}from"./addEventListener-CC7Mt4qC.js";import{B as _,c as le}from"./index-DWv55aqM.js";import{i as ae}from"./initDefaultProps-CZpOG6Cc.js";import{c as Ke}from"./useFlexGapSupport-CPj-DJgt.js";import{u as Qe}from"./useDestroyed-BcdaAeZk.js";import{o as Ue}from"./omit-BBXwSgK8.js";import{t as _e}from"./vnode-B4SLhmi3.js";var qe=function(e,l){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&l.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,n=Object.getOwnPropertySymbols(e);f<n.length;f++)l.indexOf(n[f])<0&&Object.prototype.propertyIsEnumerable.call(e,n[f])&&(a[n[f]]=e[n[f]]);return a};let q;const Xe=e=>{q={x:e.pageX,y:e.pageY},setTimeout(()=>q=null,100)};Ke()&&We(document.documentElement,"click",Xe,!0);const Ye=()=>({prefixCls:String,visible:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},confirmLoading:{type:Boolean,default:void 0},title:O.any,closable:{type:Boolean,default:void 0},closeIcon:O.any,onOk:Function,onCancel:Function,"onUpdate:visible":Function,"onUpdate:open":Function,onChange:Function,afterClose:Function,centered:{type:Boolean,default:void 0},width:[String,Number],footer:O.any,okText:O.any,okType:String,cancelText:O.any,icon:O.any,maskClosable:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},okButtonProps:A(),cancelButtonProps:A(),destroyOnClose:{type:Boolean,default:void 0},wrapClassName:String,maskTransitionName:String,transitionName:String,getContainer:{type:[String,Function,Boolean,Object],default:void 0},zIndex:Number,bodyStyle:A(),maskStyle:A(),mask:{type:Boolean,default:void 0},keyboard:{type:Boolean,default:void 0},wrapProps:Object,focusTriggerAfterClose:{type:Boolean,default:void 0},modalRender:Function,mousePosition:A()}),b=R({compatConfig:{MODE:3},name:"AModal",inheritAttrs:!1,props:ae(Ye(),{width:520,confirmLoading:!1,okType:"primary"}),setup(e,l){let{emit:a,slots:n,attrs:f}=l;const[r]=X("Modal"),{prefixCls:v,rootPrefixCls:p,direction:y,getPopupContainer:i}=he("modal",e),[c,o]=He(v);Pe(e.visible===void 0);const s=g=>{a("update:visible",!1),a("update:open",!1),a("cancel",g),a("change",!1)},t=g=>{a("ok",g)},m=()=>{var g,k;const{okText:I=(g=n.okText)===null||g===void 0?void 0:g.call(n),okType:P,cancelText:C=(k=n.cancelText)===null||k===void 0?void 0:k.call(n),confirmLoading:h}=e;return u(we,null,[u(_,x({onClick:s},e.cancelButtonProps),{default:()=>[C||r.value.cancelText]}),u(_,x(x({},le(P)),{},{loading:h,onClick:t},e.okButtonProps),{default:()=>[I||r.value.okText]})])};return()=>{var g,k;const{prefixCls:I,visible:P,open:C,wrapClassName:h,centered:F,getContainer:B,closeIcon:N=(g=n.closeIcon)===null||g===void 0?void 0:g.call(n),focusTriggerAfterClose:j=!0}=e,D=qe(e,["prefixCls","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),W=H(h,{[`${v.value}-centered`]:!!F,[`${v.value}-wrap-rtl`]:y.value==="rtl"});return c(u(Ve,x(x(x({},D),f),{},{rootClassName:o.value,class:H(o.value,f.class),getContainer:B||i?.value,prefixCls:v.value,wrapClassName:W,visible:C??P,onClose:s,focusTriggerAfterClose:j,transitionName:V(p.value,"zoom",e.transitionName),maskTransitionName:V(p.value,"fade",e.maskTransitionName),mousePosition:(k=D.mousePosition)!==null&&k!==void 0?k:q}),d(d({},n),{footer:n.footer||m,closeIcon:()=>u("span",{class:`${v.value}-close-x`},[N||u(Fe,{class:`${v.value}-close-icon`},null)])})))}}}),Ge={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:A(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function ne(e){return!!(e&&e.then)}const oe=R({compatConfig:{MODE:3},name:"ActionButton",props:Ge,setup(e,l){let{slots:a}=l;const n=T(!1),f=T(),r=T(!1);let v;const p=Qe();Be(()=>{e.autofocus&&(v=setTimeout(()=>{var o,s;return(s=(o=Ne(f.value))===null||o===void 0?void 0:o.focus)===null||s===void 0?void 0:s.call(o)}))}),Oe(()=>{clearTimeout(v)});const y=function(){for(var o,s=arguments.length,t=new Array(s),m=0;m<s;m++)t[m]=arguments[m];(o=e.close)===null||o===void 0||o.call(e,...t)},i=o=>{ne(o)&&(r.value=!0,o.then(function(){p.value||(r.value=!1),y(...arguments),n.value=!1},s=>(p.value||(r.value=!1),n.value=!1,Promise.reject(s))))},c=o=>{const{actionFn:s}=e;if(n.value)return;if(n.value=!0,!s){y();return}let t;if(e.emitEvent){if(t=s(o),e.quitOnNullishReturnValue&&!ne(t)){n.value=!1,y(o);return}}else if(s.length)t=s(e.close),n.value=!1;else if(t=s(),!t){y();return}i(t)};return()=>{const{type:o,prefixCls:s,buttonProps:t}=e;return u(_,x(x(x({},le(o)),{},{onClick:c,loading:r.value,prefixCls:s},t),{},{ref:f}),a)}}});function S(e){return typeof e=="function"?e():e}const re=R({name:"ConfirmDialog",inheritAttrs:!1,props:["icon","onCancel","onOk","close","closable","zIndex","afterClose","visible","open","keyboard","centered","getContainer","maskStyle","okButtonProps","cancelButtonProps","okType","prefixCls","okCancel","width","mask","maskClosable","okText","cancelText","autoFocusButton","transitionName","maskTransitionName","type","title","content","direction","rootPrefixCls","bodyStyle","closeIcon","modalRender","focusTriggerAfterClose","wrapClassName","confirmPrefixCls","footer"],setup(e,l){let{attrs:a}=l;const[n]=X("Modal");return()=>{const{icon:f,onCancel:r,onOk:v,close:p,okText:y,closable:i=!1,zIndex:c,afterClose:o,keyboard:s,centered:t,getContainer:m,maskStyle:g,okButtonProps:k,cancelButtonProps:I,okCancel:P,width:C=416,mask:h=!0,maskClosable:F=!1,type:B,open:N,title:j,content:D,direction:W,closeIcon:me,modalRender:ve,focusTriggerAfterClose:Ce,rootPrefixCls:L,bodyStyle:pe,wrapClassName:ge,footer:Y}=e;let $=f;if(!f&&f!==null)switch(B){case"info":$=u($e,null,null);break;case"success":$=u(Ie,null,null);break;case"error":$=u(Ae,null,null);break;default:$=u(Se,null,null)}const ye=e.okType||"primary",K=e.prefixCls||"ant-modal",M=`${K}-confirm`,xe=a.style||{},G=P??B==="confirm",J=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",z=`${K}-confirm`,ke=H(z,`${z}-${e.type}`,{[`${z}-rtl`]:W==="rtl"},a.class),Q=n.value,be=G&&u(oe,{actionFn:r,close:p,autofocus:J==="cancel",buttonProps:I,prefixCls:`${L}-btn`},{default:()=>[S(e.cancelText)||Q.cancelText]});return u(b,{prefixCls:K,class:ke,wrapClassName:H({[`${z}-centered`]:!!t},ge),onCancel:Te=>p?.({triggerCancel:!0},Te),open:N,title:"",footer:"",transitionName:V(L,"zoom",e.transitionName),maskTransitionName:V(L,"fade",e.maskTransitionName),mask:h,maskClosable:F,maskStyle:g,style:xe,bodyStyle:pe,width:C,zIndex:c,afterClose:o,keyboard:s,centered:t,getContainer:m,closable:i,closeIcon:me,modalRender:ve,focusTriggerAfterClose:Ce},{default:()=>[u("div",{class:`${M}-body-wrapper`},[u("div",{class:`${M}-body`},[S($),j===void 0?null:u("span",{class:`${M}-title`},[S(j)]),u("div",{class:`${M}-content`},[S(D)])]),Y!==void 0?S(Y):u("div",{class:`${M}-btns`},[be,u(oe,{type:ye,actionFn:v,close:p,autofocus:J==="ok",buttonProps:k,prefixCls:`${L}-btn`},{default:()=>[S(y)||(G?Q.okText:Q.justOkText)]})])])]})}}}),w=[],E=e=>{const l=document.createDocumentFragment();let a=d(d({},Ue(e,["parentContext","appContext"])),{close:r,open:!0}),n=null;function f(){n&&(Z(null,l),n=null);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];const s=c.some(t=>t&&t.triggerCancel);e.onCancel&&s&&e.onCancel(()=>{},...c.slice(1));for(let t=0;t<w.length;t++)if(w[t]===r){w.splice(t,1);break}}function r(){for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];a=d(d({},a),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),f.apply(this,c)}}),a.visible&&delete a.visible,v(a)}function v(i){typeof i=="function"?a=i(a):a=d(d({},a),i),n&&_e(n,a,l)}const p=i=>{const c=Me,o=c.prefixCls,s=i.prefixCls||`${o}-modal`,t=c.iconPrefixCls,m=Re();return u(Ee,x(x({},c),{},{prefixCls:o}),{default:()=>[u(re,x(x({},i),{},{rootPrefixCls:o,prefixCls:s,iconPrefixCls:t,locale:m,cancelText:i.cancelText||m.cancelText}),null)]})};function y(i){const c=u(p,d({},i));return c.appContext=e.parentContext||e.appContext||c.appContext,Z(c,l),c}return n=y(a),w.push(r),{destroy:r,update:v}};function se(e){return d(d({},e),{type:"warning"})}function ie(e){return d(d({},e),{type:"info"})}function ce(e){return d(d({},e),{type:"success"})}function ue(e){return d(d({},e),{type:"error"})}function fe(e){return d(d({},e),{type:"confirm"})}const Je=()=>({config:Object,afterClose:Function,destroyAction:Function,open:Boolean}),Ze=R({name:"HookModal",inheritAttrs:!1,props:ae(Je(),{config:{width:520,okType:"primary"}}),setup(e,l){let{expose:a}=l;var n;const f=U(()=>e.open),r=U(()=>e.config),{direction:v,getPrefixCls:p}=je(),y=p("modal"),i=p(),c=()=>{var m,g;e?.afterClose(),(g=(m=r.value).afterClose)===null||g===void 0||g.call(m)},o=function(){e.destroyAction(...arguments)};a({destroy:o});const s=(n=r.value.okCancel)!==null&&n!==void 0?n:r.value.type==="confirm",[t]=X("Modal",De.Modal);return()=>u(re,x(x({prefixCls:y,rootPrefixCls:i},r.value),{},{close:o,open:f.value,afterClose:c,okText:r.value.okText||(s?t?.value.okText:t?.value.justOkText),direction:r.value.direction||v.value,cancelText:r.value.cancelText||t?.value.cancelText}),null)}});let te=0;const en=R({name:"ElementsHolder",inheritAttrs:!1,setup(e,l){let{expose:a}=l;const n=T([]);return a({addModal:r=>(n.value.push(r),n.value=n.value.slice(),()=>{n.value=n.value.filter(v=>v!==r)})}),()=>n.value.map(r=>r())}});function nn(){const e=T(null),l=T([]);ee(l,()=>{l.value.length&&([...l.value].forEach(v=>{v()}),l.value=[])},{immediate:!0});const a=r=>function(p){var y;te+=1;const i=T(!0),c=T(null),o=T(Le(p)),s=T({});ee(()=>p,C=>{k(d(d({},ze(C)?C.value:C),s.value))});const t=function(){i.value=!1;for(var C=arguments.length,h=new Array(C),F=0;F<C;F++)h[F]=arguments[F];const B=h.some(N=>N&&N.triggerCancel);o.value.onCancel&&B&&o.value.onCancel(()=>{},...h.slice(1))};let m;const g=()=>u(Ze,{key:`modal-${te}`,config:r(o.value),ref:c,open:i.value,destroyAction:t,afterClose:()=>{m?.()}},null);m=(y=e.value)===null||y===void 0?void 0:y.addModal(g),m&&w.push(m);const k=C=>{o.value=d(d({},o.value),C)};return{destroy:()=>{c.value?t():l.value=[...l.value,t]},update:C=>{s.value=C,c.value?k(C):l.value=[...l.value,()=>k(C)]}}},n=U(()=>({info:a(ie),success:a(ce),error:a(ue),warning:a(se),confirm:a(fe)})),f=Symbol("modalHolderKey");return[n.value,()=>u(en,{key:f,ref:e},null)]}function de(e){return E(se(e))}b.useModal=nn;b.info=function(l){return E(ie(l))};b.success=function(l){return E(ce(l))};b.error=function(l){return E(ue(l))};b.warning=de;b.warn=de;b.confirm=function(l){return E(fe(l))};b.destroyAll=function(){for(;w.length;){const l=w.pop();l&&l()}};b.install=function(e){return e.component(b.name,b),e};export{b as M};
