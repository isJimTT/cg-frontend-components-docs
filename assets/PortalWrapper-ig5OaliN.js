import{c as $,n as T,a4 as m,ar as z,as as E,d as D,b as I,P as L,s as f,z as R,y as _,w as H,ab as O,o as F,a as M,at as A}from"./iframe-CiolPNwv.js";import{w as P}from"./raf-Deuc0E8-.js";let b;function k(e){if(typeof document>"u")return 0;if(b===void 0){const i=document.createElement("div");i.style.width="100%",i.style.height="200px";const n=document.createElement("div"),t=n.style;t.position="absolute",t.top="0",t.left="0",t.pointerEvents="none",t.visibility="hidden",t.width="200px",t.height="150px",t.overflow="hidden",n.appendChild(i),document.body.appendChild(n);const l=i.offsetWidth;n.style.overflow="scroll";let a=i.offsetWidth;l===a&&(a=n.clientWidth),document.body.removeChild(n),b=l-a}return b}function U(e){const i=e.match(/^(.*)px$/),n=Number(i?.[1]);return Number.isNaN(n)?k():n}function K(e){if(typeof document>"u"||!e||!(e instanceof Element))return{width:0,height:0};const{width:i,height:n}=getComputedStyle(e,"::-webkit-scrollbar");return{width:U(i),height:U(n)}}const V=`vc-util-locker-${Date.now()}`;let x=0;function j(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}function q(e){const i=$(()=>!!e&&!!e.value);x+=1;const n=`${V}_${x}`;T(t=>{if(m()){if(i.value){const l=k(),a=j();z(`
html body {
  overflow-y: hidden;
  ${a?`width: calc(100% - ${l}px);`:""}
}`,n)}else E(n);t(()=>{E(n)})}},{flush:"post"})}let d=0;const v=m(),W=e=>{if(!v)return null;if(e){if(typeof e=="string")return document.querySelectorAll(e)[0];if(typeof e=="function")return e();if(typeof e=="object"&&e instanceof window.HTMLElement)return e}return document.body},X=D({compatConfig:{MODE:3},name:"PortalWrapper",inheritAttrs:!1,props:{wrapperClassName:String,forceRender:{type:Boolean,default:void 0},getContainer:L.any,visible:{type:Boolean,default:void 0},autoLock:I(),didUpdate:Function},setup(e,i){let{slots:n}=i;const t=f(),l=f(),a=f(),g=f(1),h=m()&&document.createElement("div"),C=()=>{var o,r;t.value===h&&((r=(o=t.value)===null||o===void 0?void 0:o.parentNode)===null||r===void 0||r.removeChild(t.value)),t.value=null};let s=null;const p=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)||t.value&&!t.value.parentNode?(s=W(e.getContainer),s?(s.appendChild(t.value),!0):!1):!0},S=()=>v?(t.value||(t.value=h,p(!0)),N(),t.value):null,N=()=>{const{wrapperClassName:o}=e;t.value&&o&&o!==t.value.className&&(t.value.className=o)};return R(()=>{N(),p()}),q($(()=>e.autoLock&&e.visible&&m()&&(t.value===document.body||t.value===h))),_(()=>{let o=!1;H([()=>e.visible,()=>e.getContainer],(r,c)=>{let[y,u]=r,[B,w]=c;v&&(s=W(e.getContainer),s===document.body&&(y&&!B?d+=1:o&&(d-=1))),o&&(typeof u=="function"&&typeof w=="function"?u.toString()!==w.toString():u!==w)&&C(),o=!0},{immediate:!0,flush:"post"}),O(()=>{p()||(a.value=P(()=>{g.value+=1}))})}),F(()=>{const{visible:o}=e;v&&s===document.body&&(d=o&&d?d-1:d),C(),P.cancel(a.value)}),()=>{const{forceRender:o,visible:r}=e;let c=null;const y={getOpenCount:()=>d,getContainer:S};return g.value&&(o||r||l.value)&&(c=M(A,{getContainer:S,ref:l,didUpdate:e.didUpdate},{default:()=>{var u;return(u=n.default)===null||u===void 0?void 0:u.call(n,y)}})),c}}});export{X as P,K as a,k as g};
